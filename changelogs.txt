


#Friday, 10 March 2017
- db class
	* change how table properties are retained
		$retain = $this->db->setTable('test')
				->setFields('test, test, test')
				->setWhere("id = '1'")
				->getProperties();
		
		$all_rows = $this->db->setProperties($retain)
							->runSelect()
							->getNumRows();
		
		$result = $this->db->setProperties($retain)
							->setLimit($limit)
							->setLimitOffset(($limit_offset)
							->runSelect()
							->getResult();
							
		$page_rows = $this->db->getNumRows();

	* change how query are checked
		$this->db->setTable('test')
				->setFields('test, test, test')
				->setWhere("id = '1'")

		// echo $this->db->buildSelect();
		return $this->db->runSelect()->getRow();

	* query builder

		$left_select = $this->db->setTable('wc_user_group ug')
								->setFields('wma.module_name module_name, mod_add, mod_view, mod_edit, mod_delete, mod_list')
								->innerJoin('wc_module_access wma ON ug.id = wma.usergroup_id')
								->setWhere("ug.id = '$group_id'")
								->buildSelect();

		$this->db->setTable('wc_modules wm')
					->setFields('wm.module_name module_name, ug.mod_add mod_add, ug.mod_view mod_view, ug.mod_edit mod_edit, ug.mod_delete mod_delete, ug.mod_list mod_list')
					->leftJoin("($left_select) ug ON ug.module_name = wm.module_name")
					->setGroupBy('wm.module_name');

	
		echo $this->db->buildSelect();
		return $this->db->runSelect()->getResult();

		SELECT wm.module_name module_name, ug.mod_add mod_add, ug.mod_view mod_view, ug.mod_edit mod_edit, ug.mod_delete mod_delete, ug.mod_list mod_list FROM wc_modules wm LEFT JOIN (SELECT wma.module_name module_name, mod_add, mod_view, mod_edit, mod_delete, mod_list FROM wc_user_group ug INNER JOIN wc_module_access wma ON ug.id = wma.usergroup_id WHERE ug.id = '') ug ON ug.module_name = wm.module_name GROUP BY wm.module_name 